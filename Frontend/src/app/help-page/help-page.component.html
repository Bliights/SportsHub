<app-nav-bar></app-nav-bar>
<h1 class="text-center text-primary">
  SportsHub
</h1>
<h2 class="text-center text-primary">
  Help center
</h2>

<div class="text-center mt-4">
  <button class="btn btn-primary" (click)="openModal()">Create New Ticket</button>
</div>

<div class="modal-overlay" *ngIf="isModalOpen">
  <div class="modal-window">
    <h3 class="text-center">Create Help Ticket</h3>
    <form [formGroup]="createTicketForm">
      <div class="form-group">
        <label for="title">Title</label>
        <input id="title" formControlName="subject" class="form-control" type="text" placeholder="Enter ticket title">
        <small *ngIf="createTicketForm.get('subject')?.invalid && createTicketForm.get('subject')?.touched" class="text-danger">
          Title is required and must not exceed 100 characters.
        </small>
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <textarea id="description" formControlName="description" class="form-control" rows="3" placeholder="Enter ticket description"></textarea>
        <small *ngIf="createTicketForm.get('description')?.invalid && createTicketForm.get('description')?.touched" class="text-danger">
          Description is required and must not exceed 500 characters.
        </small>
      </div>
      <div class="text-center mt-3">
        <button class="btn btn-success" (click)="createTicket()" [disabled]="createTicketForm.invalid">Submit</button>
        <button class="btn btn-danger" (click)="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<h3 class="text-center text-secondary mt-5">Existing Help Tickets</h3>
<div class="container mt-3">
  <table class="table table-bordered">
    <thead>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let ticket of helpTickets">
      <td>{{ ticket.subject }}</td>
      <td>{{ ticket.description }}</td>
      <td>{{ ticket.status }}</td>
      <td>
        <button class="btn btn-info btn-sm" (click)="viewTicket(ticket.id)">View</button>
        <button class="btn btn-danger btn-sm" (click)="deleteTicket(ticket.id)">Delete</button>
      </td>
    </tr>
    </tbody>
  </table>
</div>


